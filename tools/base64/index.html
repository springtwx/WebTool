<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Base64 ç¼–è§£ç å™¨</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%94%90%3C/text%3E%3C/svg%3E" />
  <style>
    :root {
      color-scheme: light;
      --bg: #f6f7f9;
      --card: #ffffff;
      --text: #1b1f24;
      --muted: #5b6776;
      --accent: #1f5eff;
      --border: #e3e7ee;
      font-family: "Inter", "Noto Sans SC", system-ui, -apple-system, sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
    }

    main {
      max-width: 1080px;
      margin: 0 auto;
      padding: 48px 24px 80px;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 32px;
    }

    header a {
      color: var(--muted);
      text-decoration: none;
      font-size: 14px;
    }

    header h1 {
      margin: 0;
      font-size: 30px;
    }

    .page-title {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .page-icon {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: #eef1f6;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    header p {
      margin: 0;
      color: var(--muted);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .copy-link {
      border: 1px solid var(--border);
      background: #fff;
      color: var(--muted);
      font-size: 12px;
      padding: 6px 12px;
      border-radius: 999px;
      cursor: pointer;
      transition: border 0.2s ease, color 0.2s ease;
    }

    .copy-link:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .card {
      background: var(--card);
      border-radius: 16px;
      border: 1px solid var(--border);
      padding: 24px;
      box-shadow: 0 12px 24px rgba(14, 23, 38, 0.06);
    }

    .input-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 16px;
    }

    .input-grid--controls {
      grid-template-columns: minmax(0, 1fr) auto minmax(0, 1fr);
      align-items: start;
    }

    textarea {
      width: 100%;
      min-height: 200px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      font-size: 14px;
      resize: vertical;
      font-family: inherit;
      color: var(--text);
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-self: center;
    }

    .controls button {
      min-width: 120px;
      padding: 8px 12px;
      font-size: 13px;
    }

    button.action {
      border: none;
      background: var(--accent);
      color: #fff;
      padding: 10px 16px;
      border-radius: 10px;
      font-size: 14px;
      cursor: pointer;
    }

    button.secondary {
      border: 1px solid var(--border);
      background: #fff;
      color: var(--muted);
    }

    .subtle {
      color: var(--muted);
      font-size: 13px;
      margin-top: 8px;
    }

    .status {
      min-height: 20px;
      font-size: 13px;
      color: var(--muted);
    }

    @media (max-width: 720px) {
      main {
        padding: 40px 20px 64px;
      }

      header h1 {
        font-size: 24px;
      }

      .page-icon {
        width: 36px;
        height: 36px;
        border-radius: 10px;
      }

      .card {
        padding: 18px;
      }
    }

    @media (max-width: 520px) {
      main {
        padding: 32px 16px 56px;
      }

      .input-grid {
        grid-template-columns: 1fr;
      }

      .input-grid--controls {
        grid-template-columns: 1fr;
      }

      textarea {
        min-height: 160px;
      }

      .controls {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
      }

      .controls button {
        flex: 1 1 140px;
        min-width: 0;
      }

      .header-actions {
        align-items: flex-start;
      }

      .page-title {
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <main>
    <header>
      <a href="../../">â† è¿”å›å·¥å…·é¦–é¡µ</a>
      <div class="header-actions">
        <div class="page-title">
          <span class="page-icon" aria-hidden="true">ğŸ”</span>
          <h1>Base64 ç¼–è§£ç å™¨</h1>
        </div>
        <button class="copy-link" type="button" id="copy-link">å¤åˆ¶æ­¤å·¥å…·é“¾æ¥</button>
      </div>
      <p>æ”¯æŒæ–‡æœ¬ä¸ Base64 äº’è½¬ï¼Œé€‚åˆå¿«é€ŸéªŒè¯æˆ–åˆ†äº«ã€‚</p>
    </header>

    <section class="card">
      <div class="input-grid input-grid--controls">
        <label>
          åŸæ–‡ / æ˜æ–‡
          <textarea id="plain-input" placeholder="åœ¨è¿™é‡Œè¾“å…¥æ–‡æœ¬"></textarea>
        </label>
        <div class="controls">
          <button
            class="action"
            type="button"
            id="encode"
            data-label-desktop="ç¼–ç  â†’"
            data-label-mobile="ç¼–ç  â†“"
          >ç¼–ç  â†’</button>
          <button
            class="action"
            type="button"
            id="decode"
            data-label-desktop="â† è§£ç "
            data-label-mobile="â†‘ è§£ç "
          >â† è§£ç </button>
          <button class="action secondary" type="button" id="swap">äº¤æ¢å†…å®¹</button>
          <button class="action secondary" type="button" id="copy-base64">å¤åˆ¶ Base64</button>
          <button class="action secondary" type="button" id="clear">æ¸…ç©º</button>
        </div>
        <label>
          Base64
          <textarea id="base64-input" placeholder="åœ¨è¿™é‡Œè¾“å…¥ Base64"></textarea>
        </label>
      </div>

      <div class="status" id="status"></div>
      <p class="subtle">æç¤ºï¼šç¼–ç /è§£ç å°†ä¿æŒ UTF-8 å…¼å®¹ï¼Œè‹¥æ— æ³•è¯†åˆ«å°†æç¤ºé”™è¯¯ã€‚</p>
    </section>
  </main>

  <script>
    const copyButton = document.getElementById("copy-link");
    const plainInput = document.getElementById("plain-input");
    const base64Input = document.getElementById("base64-input");
    const status = document.getElementById("status");
    const labelButtons = document.querySelectorAll("[data-label-desktop][data-label-mobile]");

    function updateButtonLabels() {
      const isMobile = window.matchMedia("(max-width: 520px)").matches;
      labelButtons.forEach((button) => {
        button.textContent = isMobile ? button.dataset.labelMobile : button.dataset.labelDesktop;
      });
    }

    function setStatus(message, isError = false) {
      status.textContent = message;
      status.style.color = isError ? "#c0392b" : "var(--muted)";
    }

    function encodeToBase64(text) {
      return btoa(encodeURIComponent(text).replace(/%([0-9A-F]{2})/g, (_, code) => String.fromCharCode(parseInt(code, 16))));
    }

    function decodeFromBase64(text) {
      const decoded = atob(text);
      return decodeURIComponent(
        Array.from(decoded)
          .map((char) => `%${char.charCodeAt(0).toString(16).padStart(2, "0")}`)
          .join("")
      );
    }

    function copyText(text) {
      if (!text) {
        setStatus("æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹", true);
        return;
      }
      navigator.clipboard.writeText(text).then(
        () => setStatus("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"),
        () => window.prompt("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ï¼š", text)
      );
    }

    document.getElementById("encode").addEventListener("click", () => {
      try {
        const encoded = encodeToBase64(plainInput.value);
        base64Input.value = encoded;
        setStatus("å·²ç¼–ç ");
      } catch (error) {
        setStatus("ç¼–ç å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥å†…å®¹", true);
      }
    });

    document.getElementById("decode").addEventListener("click", () => {
      try {
        const decoded = decodeFromBase64(base64Input.value.trim());
        plainInput.value = decoded;
        setStatus("å·²è§£ç ");
      } catch (error) {
        setStatus("è§£ç å¤±è´¥ï¼Œè¯·ç¡®è®¤ Base64 æ˜¯å¦æ­£ç¡®", true);
      }
    });

    document.getElementById("swap").addEventListener("click", () => {
      const temp = plainInput.value;
      plainInput.value = base64Input.value;
      base64Input.value = temp;
      setStatus("å·²äº¤æ¢å†…å®¹");
    });

    document.getElementById("copy-base64").addEventListener("click", () => {
      copyText(base64Input.value);
    });

    document.getElementById("clear").addEventListener("click", () => {
      plainInput.value = "";
      base64Input.value = "";
      setStatus("å·²æ¸…ç©º");
    });

    updateButtonLabels();
    window.addEventListener("resize", updateButtonLabels);

    copyButton.addEventListener("click", async () => {
      const url = window.location.href;
      try {
        await navigator.clipboard.writeText(url);
        copyButton.textContent = "å·²å¤åˆ¶";
      } catch (error) {
        window.prompt("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ï¼š", url);
      }
      window.setTimeout(() => {
        copyButton.textContent = "å¤åˆ¶æ­¤å·¥å…·é“¾æ¥";
      }, 1500);
    });
  </script>
</body>
</html>
